<div ng-include="'components/partials/header.html'"></div>
<div class="main-content-block container">
    <div class="aside-block" ng-include="'components/partials/side_menu.html'"></div>
    <div class="items-block">
        <div class="advert-form-block">
            <div class="advert-form-block-header" id="scrollTo">
                <h2>Добавление нового объявления</h2>
            </div>
            <div ng-include="'/components/partials/error-block.html'"></div>
            <div class="advert-form-block-main">
                <form class="advert-form" ng-submit="sendForm()" name="form">
                    <div class="form-group">
                        <label for="tag" class="label">Теги: </label>
                        <input type="text" class="input" id="tag" ng-model="formData.tags"
                               pattern="(#\w+)+" title="#тег">
                        <div class="small-help">*Теги писать с решёткой: #пример#тега</div>
                    </div>
                    <div class="form-group">
                        <label for="category" class="label">Категория: </label>
                        <select class="input" id="category" ng-model="selected"
                                ng-change="getSubcategories()"
                                ng-options="category.id as category.name for category in categories"
                                required>
                            <option value=""></option>
                        </select>
                    </div>
                    <div class="form-group" ng-show="selected">
                        <label for="subcategory" class="label">Подкатегория: </label>
                        <select class="input" name="subcategory" id="subcategory"
                                ng-model="formData.subcategory.id"
                                ng-options="subcategory.id as subcategory.name for subcategory in popsubcategories"
                                required>
                            <option value=""></option>
                        </select>
                    </div>
                    <hr class="hr">
                    <div class="form-group">
                        <label for="marker" class="label">Метка: </label>
                        <select class="input" id="marker" ng-model="formData.marker.id"
                                ng-options="marker.id as marker.name for marker in markers"
                                required>
                            <option value=""></option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="topic" class="label">Тема объявления: </label>
                        <input type="text" class="input" id="topic" ng-model="formData.title"
                               required>
                    </div>
                    <div class="form-group">
                        <label for="text" class="label">Текст объявления: </label>
                        <textarea rows="10" class="input" id="text"
                                  ng-model="formData.description" required></textarea>
                    </div>
                    <hr class="hr">
                    <div class="form-group">
                        <label class="label">Фотография: </label>
                        <input type="file" class="input" name="photo" id="file1"
                               onchange="convertFileToBase64('file1')" required>
                    </div>
                    <hr class="hr">
                    <div class="form-group">
                        <label for="price" class="label">Цена: </label>
                        <input type="number" class="input" id="price" ng-model="formData.price" required>
                        <select required class="input" id="currency" ng-model="formData.currency.id"
                                ng-options="currency.id as currency.abbreviation for currency in currencies">
                            <option value=""></option>
                        </select>
                    </div>
                    <hr class="hr">
                    <button class="advert-form-submit" type="submit">Готово</button>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="footer" ng-include="'components/partials/footer.html'"></div>